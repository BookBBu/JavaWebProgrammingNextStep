# ğŸ¢ 5ì¥ ì›¹ ì„œë²„ ë¦¬íŒ©í† ë§, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì™€ ì„œë¸”ë¦¿ì˜ ê´€ê³„

> #### ì €ìê°€ ì‘ì„±í•œ ë¸Œëœì¹˜ì˜ ìµœì¢… íŒŒì¼ë¡œ ì§„í–‰ í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì±•í„°ì—ì„  ë¦¬íŒ©í† ë§ì„ ë©”ì¸ìœ¼ë¡œ ë‹¤ë¤„ë´…ì‹œë‹¤.
- - -

## 5.1 HTTP ì›¹ì„œë²„ ë¦¬íŒ©í† ë§ ì‹¤ìŠµ

### 5.1.1 ë¦¬íŒ©í† ë§í•  ë¶€ë¶„ ì°¾ê¸°

> ëƒ„ìƒˆë‚˜ëŠ” ì½”ë“œë¥¼ ì°¾ì•„ë‚´ ìˆ˜ì •í•˜ì!!

### 5.1.2 ë¦¬íŒ©í† ë§ 1ë‹¨ê³„ íŒíŠ¸

#### 5.1.2.1 ìš”ì²­ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•œë‹¤(HttpRequest)

> 1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆëŠ” InputStreamì„ ìƒì„±ìë¡œ ë°›ì•„ HTTP ë©”ì†Œë“œ, URL, í—¤ë”, ë³¸ë¬¸ì„ ë¶„ë¦¬í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤.
> 2. í—¤ë”ëŠ” Map<String, String>ì— ì €ì¥í•´ ê´€ë¦¬í•˜ê³  getHeader("í•„ë“œ ì´ë¦„") ë©”ì†Œë“œë¥¼ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í•œë‹¤.
> 3. GETê³¼ POST ë©”ì†Œë“œì— ë”°ë¼ ì „ë‹¬ë˜ëŠ” ì¸ìë¥¼ Map<String, String>ì— ì €ì¥í•´ ê´€ë¦¬í•˜ê³  getParameter("ì¸ì ì´ë¦„") ë©”ì†Œë“œë¥¼ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í•œë‹¤.

--> ìƒì„±ì ë‹¨ê³„ì—ì„œ ëª¨ë“  Http Requestë¥¼ ì½ì–´ë“¤ì´ê³ , GETë°©ì‹ê³¼ POSTë°©ì‹ì—ì„œ ìš°ë¦¬ê°€ ì·¨í•´ì•¼í•  ì°¨ì´ì ì€ Parameterë¥¼ ì–´ë–¤ ìœ„ì¹˜ì—ì„œ ë°›ëŠ”ê°€ì´ë‹¤.  
private String path, method; private String Map<String, String> hedaerMap, parameterMap; ì„ ì´ìš©í•´ì„œ requestë¥¼ ì½ëŠ” ê³¼ì •ì—ì„œ ë¯¸ë¦¬ ëª¨ë“ 
ì •ë³´ë¥¼ ê¸°ë¡í–ˆë‹¤ê°€  
get~~ ë©”ì„œë“œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ê·¸ ê°’ì„ ë¦¬í„´í•´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

#### ë‚´ê°€ êµ¬í˜„í•œ ì½”ë“œ

```java
public class HttpRequest {

    private String method, path;
    private Map<String, String> headerMap = new HashMap<>();
    private Map<String, String> parameterMap = new HashMap<>();

    public HttpRequest(InputStream in) {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8"));
            String line = br.readLine();
            method = line.split(" ")[0];
            if (method.equals("GET")) {
                String[] url = line.split(" ")[1].split("[?]");
                path = url[0];
                String[] parameterSplit = url[1].split("&");
                for (String param : parameterSplit) {
                    String key = param.split("=")[0];
                    String value = param.split("=")[1];
                    parameterMap.put(key, value);
                }
            }
            if (method.equals("POST")) {
                path = line.split(" ")[1];
            }
            while (line != null && !line.equals("")) {
                if (line.contains(":")) {
                    String[] s = line.split(":");
                    headerMap.put(s[0].trim(), s[1].trim());
                }
                line = br.readLine();
            }

            if (method.equals("POST")) {
                line = br.readLine();
                String[] parameterSplit = line.split("&");
                for (String param : parameterSplit) {
                    String key = param.split("=")[0];
                    String value = param.split("=")[1];
                    parameterMap.put(key, value);
                }

            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public String getMethod() {
        return method;
    }

    public String getPath() {
        return path;
    }

    public String getHeader(String header) {
        return headerMap.get(header);
    }

    public String getParameter(String parameter) {
        return parameterMap.get(parameter);
    }
}
```

ì´ìƒ ì—†ì´ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ í†µê³¼í•œë‹¤.
- - - 

#### 5.1.2.2 ì‘ë‹µ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•œë‹¤(HttpResponse)

> 1. RequestHandler í´ë˜ìŠ¤ë¥¼ ë³´ë©´ ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë§ì€ ì¤‘ë³µì´ ìˆë‹¤. ì´ ì¤‘ë³µì„ ì œê±°í•´ ë³¸ë‹¤.
> 2. ì‘ë‹µ í—¤ë” ì •ë³´ë¥¼ Map<String, String>ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.
> 3. ì‘ë‹µì„ ë³´ë‚¼ ë•Œ HTML, CSS, ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì§ì ‘ ì½ì–´ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ëŠ” ë©”ì†Œë“œëŠ” forward(), ë‹¤ë¥¸ URLë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ëŠ” ë©”ì†Œë“œëŠ” sendRedirect() ë©”ì†Œë“œë¥¼ ë‚˜ëˆ„ì–´ êµ¬í˜„í•œë‹¤.

--> ê¸°ì¡´ RequestHandlerì˜ ë§ì€ ë¶€ë¶„ì„ ì°¨ì§€í•˜ë˜ ì½”ë“œëŠ” ë°”ë¡œ ì‘ë‹µê³¼ ê´€ë ¨í•œ ì½”ë“œì˜€ë‹¤. 200ì‘ë‹µì´ëƒ 302ì‘ë‹µì´ëƒì— ë”°ë¼ ë©”ì„œë“œë¥¼ ë‹¬ë¦¬í–ˆê³ ,
ë¡œê·¸ì¸ ì‹¤íŒ¨, ì„±ê³µì— ë”°ë¼ ë¶„ë¦¬ë˜ëŠ” ë¶€ë¶„ë„ ìˆì—ˆë‹¤. ì´ëŸ° ë¶€ë¶„ì„ ë”°ë¡œ í´ë˜ìŠ¤ë¡œ ë¹¼ë‚´ì„œ ë¦¬íŒ©í† ë§í•´ë³´ì.  
ì´ ë¶€ë¶„ì€ ì „í˜€ ê°ì´ ì¡íˆì§€ ì•Šì•„ì„œ ì§ì ‘ í•˜ì§„ ëª»í•˜ê³  ì½”ë“œë¥¼ ë”°ë¼ì³¤ë‹¤.

```java
package http;

import java.io.DataOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.nio.file.Files;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HttpResponse {
    private static final Logger log = LoggerFactory.getLogger(HttpResponse.class);

    private DataOutputStream dos = null;

    private Map<String, String> headers = new HashMap<String, String>();

    public HttpResponse(OutputStream out) {
        dos = new DataOutputStream(out);
    }

    public void addHeader(String key, String value) {
        headers.put(key, value);
    }

    public void forward(String url) {
        try {
            byte[] body = Files.readAllBytes(new File("./webapp" + url).toPath());
            if (url.endsWith(".css")) {
                headers.put("Content-Type", "text/css");
            } else if (url.endsWith(".js")) {
                headers.put("Content-Type", "application/javascript");
            } else {
                headers.put("Content-Type", "text/html;charset=utf-8");
            }
            headers.put("Content-Length", body.length + "");
            response200Header(body.length);
            responseBody(body);
        } catch (IOException e) {
            log.error(e.getMessage());
        }
    }

    public void forwardBody(String body) {
        byte[] contents = body.getBytes();
        headers.put("Content-Type", "text/html;charset=utf-8");
        headers.put("Content-Length", contents.length + "");
        response200Header(contents.length);
        responseBody(contents);
    }

    private void response200Header(int lengthOfBodyContent) {
        try {
            dos.writeBytes("HTTP/1.1 200 OK \r\n");
            processHeaders();
            dos.writeBytes("\r\n");
        } catch (IOException e) {
            log.error(e.getMessage());
        }
    }

    private void responseBody(byte[] body) {
        try {
            dos.write(body, 0, body.length);
            dos.writeBytes("\r\n");
            dos.flush();
        } catch (IOException e) {
            log.error(e.getMessage());
        }
    }

    public void sendRedirect(String redirectUrl) {
        try {
            dos.writeBytes("HTTP/1.1 302 Found \r\n");
            processHeaders();
            dos.writeBytes("Location: " + redirectUrl + " \r\n");
            dos.writeBytes("\r\n");
        } catch (IOException e) {
            log.error(e.getMessage());
        }
    }

    private void processHeaders() {
        try {
            Set<String> keys = headers.keySet();
            for (String key : keys) {
                dos.writeBytes(key + ": " + headers.get(key) + " \r\n");
            }
        } catch (IOException e) {
            log.error(e.getMessage());
        }
    }
}

```

forward, forwardBodyì—ì„œ ì‘ë‹µì˜ í‹€ì„ ë§Œë“¤ê³  response~~ì™€ sendRedriectì—ì„œ ì‘ë‹µì„ ë³´ë‚¸ë‹¤.
- - -

#### 5.1.2.3 ë‹¤í˜•ì„±ì„ í™œìš©í•´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ URLì— ëŒ€í•œ ë¶„ê¸° ì²˜ë¦¬ë¥¼ ì œê±°í•œë‹¤.

RequestHandler í´ë˜ìŠ¤ë¥¼ ë³´ë©´ ê¸°ëŠ¥ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ë¶„ê¸°ë¶„ (if/else)ì´ í•˜ë‚˜ì”© ì¶”ê°€ë˜ê¸°ë•Œë¬¸ì— ì´ëŸ° ë¶„ê¸°ë¬¸ì„ ì œê±°í•˜ê¸° ìœ„í•´ ë‹¤í˜•ì„±ì„ í™œìš©í•œë‹¤.
> 1. ê° ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ë¶€ë¶„ì„ ì¶”ìƒí™”í•´ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“ ë‹¤.
> 2. ê° ë¶„ê¸°ë¬¸ì„ Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë¶„ë¦¬í•œë‹¤.
> 3. ì´ë ‡ê²Œ ìƒì„±í•œ Controller êµ¬í˜„ì²´ë¥¼ Map<String, Controller>ì— ì €ì¥í•œë‹¤. Mapì˜ keyì— í•´ë‹¹í•˜ëŠ” Stringì€ ìš”ì²­ URL, valueì— í•´ë‹¹í•˜ëŠ” ControllerëŠ”
     Controller êµ¬í˜„ì²´ì´ë‹¤.
> 4. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ URLì— í•´ë‹¹í•˜ëŠ” Controllerë¥¼ ì°¾ì•„ service() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
> 5. Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” AbstractController ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•´ ì¤‘ë³µì„ ì œê±°í•˜ê³ , service() ë©”ì†Œë“œì—ì„œ GETê³¼ POST HTTP ë©”ì†Œë“œì— ë”°ë¼ doGet(),
     doPost() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•œë‹¤.

--> ì´ ë¶€ë¶„ë„ í˜¼ìëŠ” ëª»í•˜ê² ì–´ì„œ ë”°ë¼ì³¤ë‹¤. íŒŒì¼ì´ ë„ˆë¬´ ë§ì•„ì„œ ì½”ë“œëŠ” ìƒëµ

## 5.2 ì›¹ ì„œë²„ ë¦¬íŒ©í† ë§ êµ¬í˜„ ë° ì„¤ëª…

4ì¥ì—ì„œ êµ¬í˜„í•œ HTTP ì›¹ ì„œë²„ ì½”ë“œì˜ í•µì‹¬ì€ RequestHandler í´ë˜ìŠ¤ì´ë‹¤. RequestHandler í´ë˜ìŠ¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•œ í—¤ë”ì™€ ë³¸ë¬¸ ë°ì´í„° ì²˜ë¦¬, í´ë¼ì´ì–¸íŠ¸
ìš”ì²­ì— ë”°ë¥¸ ë¡œì§ ì²˜ë¦¬(íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“±), ë¡œì§ ì²˜ë¦¬ ì™„ë£Œ í›„ í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ ì‘ë‹µ í—¤ë”ì™€ ë³¸ë¬¸ ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ìœ¼ë¡œ ë‚˜ë‰œë‹¤.
í´ë˜ìŠ¤ í•˜ë‚˜ê°€ ë„ˆë¬´ ë§ì€ ì¼ì„ í•˜ë¯€ë¡œ ê° ê°ì²´ê°€ í•œê°€ì§€ ì±…ì„ì„ ê°€ì§€ë„ë¡ ì„¤ê³„ë¥¼ ê°œì„ í•˜ëŠ” ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•œë‹¤.

### ìµœì¢… êµ¬í˜„ ì½”ë“œ(RequestHandler)

```java
package webserver;

import http.HttpRequest;
import http.HttpResponse;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import controller.Controller;

public class RequestHandler extends Thread {
    private static final Logger log = LoggerFactory.getLogger(RequestHandler.class);

    private Socket connection;

    public RequestHandler(Socket connectionSocket) {
        this.connection = connectionSocket;
    }

    public void run() {
        log.debug("New Client Connect! Connected IP : {}, Port : {}", connection.getInetAddress(),
                connection.getPort());

        try (InputStream in = connection.getInputStream(); OutputStream out = connection.getOutputStream()) {
            HttpRequest request = new HttpRequest(in);
            HttpResponse response = new HttpResponse(out);

            Controller controller = RequestMapping.getController(request.getPath());
            if (controller == null) {
                String path = getDefaultPath(request.getPath());
                response.forward(path);
            } else {
                controller.service(request, response);
            }
        } catch (IOException e) {
            log.error(e.getMessage());
        }
    }

    private String getDefaultPath(String path) {
        if (path.equals("/")) {
            return "/index.html";
        }
        return path;
    }
}
```

## ìš”ì²­ íë¦„ :

1. ì›¹í˜ì´ì§€ê°€ ë³€ê²½ë˜ë©´ì„œ ìƒˆë¡œìš´ HttpRequestê°€ ë°œìƒí•˜ë©´ ë¨¼ì € RequestHandlerì—ì„œ HttpRequest ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ë™ì‹œì— responseê°ì²´ë„
   ìƒì„±í•´ ì‘ë‹µì„ ëŒ€ê¸°í•œë‹¤.
2. HttpRequestì™€ HttpResponse í´ë˜ìŠ¤ì—ì„œëŠ” inê³¼ out ê°’ì— ë”°ë¼ í•´ì•¼í•  ì¼ì„ ìˆ˜í–‰í•œë‹¤(header, bodyê°’ ë¶„ì„, ì‘ë‹µ ë¼ˆëŒ€ ë§Œë“¤ê¸°)
3. HttpRequestì˜ urlì„ í† ëŒ€ë¡œ RequestMappingì—ì„œ í•´ë‹¹í•˜ëŠ” urlì„ ì°¾ì•„ ë§ëŠ” ë‹¤í˜•ì„±ìœ¼ë¡œ Controllerë¥¼ ì°¾ì•„ì¤€ë‹¤.
4. Controller ë‚´ë¶€ì—ì„œëŠ” urlì˜ ìš”ì²­ì´ getì´ëƒ postëƒì— ë”°ë¼ ë§ëŠ” ë¡œì§ì„ ì‹¤í–‰í•´ì¤€ë‹¤.(ì—¬ê¸°ì„œ ì‘ë‹µê°’ì´ ë§ˆë¬´ë¦¬ëœë‹¤.)

mvc íŒ¨í„´ì—ì„œ modelë¶€ë¶„ê³¼ controllerë¶€ë¶„ì´ RequestHandlerì™€ Controllerì— ëª¨ë‘ í¬í•¨ë˜ì–´ìˆê³ , view ë¶€ë¶„ì€ htmlíŒŒì¼ë¡œ ì§„í–‰ëœë‹¤.  
ì´ ë•Œ ì¤‘ìš”í•œ ì ì€, HttpRequestì™€ HttpResponse ë¶€ë¶„ì€ ê°œë°œìê°€ ì¤‘ìš”í•˜ê²Œ ì‹ ê²½ì“°ì§€ ì•Šì•„ì•¼ í•  ë¶€ë¶„ì´ì§€ë§Œ, í˜„ì¬ ì½”ë“œëŠ” ì´ ë¶€ë¶„ì„ êµ¬í˜„í•˜ëŠ” ë°ì— ë§ì€ ì‹œê°„ì„ íˆ¬ìí•´ì•¼ í•œë‹¤.

### 5.2.4 HTTP ì›¹ ì„œë²„ì˜ ë¬¸ì œì 

1. HTTP ìš”ì²­ê³¼ ì‘ë‹µ í—¤ë”, ë³¸ë¬¸ ì²˜ë¦¬ì™€ ê°™ì€ ë° ì‹œê°„ì„ íˆ¬ìí•¨ìœ¼ë¡œì¨ ì •ì‘ ì¤‘ìš”í•œ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ë° íˆ¬ìí•  ì‹œê°„ì´ ìƒëŒ€ì ìœ¼ë¡œ ì ë‹¤.
2. ë™ì ì¸ HTMLì„ ì§€ì›í•˜ëŠ” ë° í•œê³„ê°€ ìˆë‹¤. ë™ì ìœ¼ë¡œ HTMLì„ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ ë§ì€ ì½”ë”©ëŸ‰ì„ í•„ìš”ë¡œ í•œë‹¤.
3. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°ì´í„°ê°€ ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ë©´ ì‚¬ë¼ì§„ë‹¤. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤.

### ë‚´ê°€ ìƒê°í•˜ëŠ” ê° ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•

1. HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ ë…¸ë™ì€ ì§€ê¸ˆìœ¼ë¡œì¬ ë”±íˆ ë°©ë²•ì´ ì—†ë‹¤. ì„œë¸”ë¦¿ì´ë‚˜ ìŠ¤í”„ë§ê°™ì€ ê²ƒì„ ì‚¬ìš©í•´ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê²ƒì„ ì‚¬ìš©í•˜ëŠ”  
   ê²Œ ì¢‹ì„ ê²ƒê°™ë‹¤. ë§Œì•½ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤ë©´ ì§€ê¸ˆì²˜ëŸ¼ ê³„ì† í•´ì•¼í•  ë“¯ í•˜ë‹¤.
2. ë™ì  HTMLì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” JSPê°™ì€ ìŠ¤í¬ë¦½íŠ¸ìš© ë­”ê°€ê°€ í•„ìš”í•˜ë‹¤. ë§Œì•½ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤ë©´ ì§€ê¸ˆì²˜ëŸ¼ ê³„ì† í•´ì•¼í•  ë“¯ í•˜ë‹¤.
3. ë°ì´í„°ê°€ ì„œë²„ê°€ ì¼œì§„ë™ì•ˆë§Œ ìœ ì§€ë˜ëŠ” ë¬¸ì œëŠ” ì–´ë–¤ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•´ì•¼í•  ë“¯ í•˜ë‹¤. í•˜ì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ë¡œì§ì„
   ì§ì ‘ ì§¤ ìˆ˜ ìˆì„ê¹Œ? ì•„ë‹ˆë¼ê³  ë³¸ë‹¤. ì—­ì‹œ jdbc, mybatis, jpaë“±ì´ í•„ìš”í•  ë“¯í•˜ë‹¤.

## 5.3 ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ, ì„œë¸”ë¦¿/JSPë¥¼ í™œìš©í•œ ë¬¸ì œ í•´ê²°

ì„œë¸”ë¦¿ì€ ì•ì„œ êµ¬í˜„í•œ ì›¹ ì„œë²„ì˜ Controller, HttpRequest, HttpResponseë¥¼ ì¶”ìƒí™” í•´ ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•´ ë†“ì€ í‘œì¤€ì´ë‹¤.
ì¦‰, HTTPì˜ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ í‘œì¤€ì„ ì •í•´ ë†“ì€ ê²ƒì„ ì„œë¸”ë¦¿ì´ë¼ ìƒê°í•˜ë©´ ëœë‹¤. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ì´ ì„œë¸”ë¦¿ í‘œì¤€ì—
ëŒ€í•œ êµ¬í˜„ì„ ë‹´ë‹¹í•˜ê³  ìˆìœ¼ë©° ì•ì—ì„œ êµ¬í˜„í•œ ì›¹ ì„œë²„ê°€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì—­í• ê³¼ ê°™ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.
> ì„œë¸”ë¦¿ì€ ë¼ì´í”„ì‚¬ì´í´ì„ ì˜ ì•Œì•„ì•¼í•œë‹¤. ì„œë¸”ë¦¿ ë¼ì´í”„ì‚¬ì´í´ì„ ì•Œê³  ìˆë‹¤ë©´ ê°œë°œë‹¨ê³„ì— ëŒ€í•œ ë” ê¹Šì€ ì´í•´ë¡œ ê°œë°œ ì‹¤ë ¥ì´ ëŠ˜ì–´ë‚  ê²ƒì´ë‹¤.
> 1. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì‹œì‘
> 2. í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” Servlet ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ì„œë¸”ë¦¿ í´ë˜ìŠ¤ë¥¼ ì°¾ìŒ
> 3. @WebServlet ì„¤ì •ì„ í†µí•´ ìš”ì²­ URLê³¼ ì„œë¸”ë¦¿ ë§¤í•‘
> 4. ì„œë¸”ë¦¿ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
> 5. init() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ ì´ˆê¸°í™”
> 6. ì´í›„ ëŒ€ê¸°ìƒíƒœë¡œ ìˆë‹¤ê°€ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ìˆì„ ê²½ìš° ìš”ì²­ URLì— í•´ë‹¹í•˜ëŠ” ì„œë¸”ë¦¿ì„ ì°¾ì•„ service() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ ì†Œë©¸ ì‘ì—… ì§„í–‰
> 7. ì„œë¹„ìŠ¤ë¥¼ í•˜ë‹¤ê°€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œí•˜ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ê³  ìˆëŠ” ëª¨ë“  ì„œë¸”ë¦¿ì˜ destroy() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ ì†Œë©¸ ì‘ì—…ì„ ì§„í–‰

### 5.4.1 ê°ì²´ì§€í–¥ ì„¤ê³„ì™€ ê°œë°œ

ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì´ë€?  
ìš°ë¦¬ê°€ ì‹¤ìƒí™œì—ì„œ ì“°ëŠ” ëª¨ë“  ê²ƒì„ ê°ì²´ë¼ í•˜ë©°, ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ í”„ë¡œê·¸ë¨ êµ¬í˜„ì— í•„ìš”í•œ ê°ì²´ë¥¼ íŒŒì•…í•˜ê³  ê°ê°ì˜ ê°ì²´ë“¤ì˜ ì—­í• ì´ ë¬´ì—‡ì¸ì§€ë¥¼
ì •ì˜í•˜ì—¬ ê°ì²´ë“¤ ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ í†µí•´ í”„ë¡œê·¸ë¨ì„ ë§Œë“œëŠ” ê²ƒì„ ë§í•œë‹¤. ê°ì²´ëŠ” í´ë˜ìŠ¤ë¼ëŠ” í‹€ì—ì„œ ìƒê²¨ë‚œ ì‹¤ì²´(instance)ì´ë‹¤. ë”°ë¼ì„œ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë¨ì€ ê°ì²´ì™€
ê°ì²´ ê°„ì˜ ì—°ê²°ë¡œ ë˜ì–´ ìˆìœ¼ë©° ê°ê°ì˜ ê°ì²´ ì•ˆì— ìë£Œêµ¬ì¡°ì™€ ì•Œê³ ë¦¬ì¦˜ì´ ë“¤ì–´ìˆëŠ” ê²ƒì´ë‹¤.

# ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ íŠ¹ì§•

1. ì¶”ìƒí™”
    - ê°ì²´ë“¤ì˜ ê³µí†µì ì¸ íŠ¹ì§•ì„ ë„ì¶œ
    - ê°ì²´ì§€í–¥ì  ê´€ì ì—ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì„ ì¶”ìƒí™”ë¼ í•¨
2. ìº¡ìŠí™”
    - ì‹¤ì œë¡œ êµ¬í˜„ë˜ëŠ” ë¶€ë¶„ì„ ì™¸ë¶€ì— ë“œëŸ¬ë‚˜ì§€ ì•Šë„ë¡í•´ ì •ë³´ë¥¼ ì€ë‹‰
    - ê°ì²´ê°€ ë…ë¦½ì ìœ¼ë¡œ ì—­í• ì„ í•  ìˆ˜ ìˆë„ë¡ ë°ì´í„°ì™€ ê¸°ëŠ¥ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ê´€ë¦¬
    - ì½”ë“œê°€ ë¬¶ì—¬ìˆì–´ì„œ ì˜¤ë¥˜ê°€ ì—†ì–´ í¸ë¦¬í•¨
    - ë°ì´í„°ë¥¼ ë³´ì´ì§€ ì•Šê³  ì™¸ë¶€ì™€ ìƒí˜¸ì‘ìš©ì„ í•  ë•ŒëŠ” ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ í†µì‹ 
3. ìƒì†ì„±
    - í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ê°€ì§„ íŠ¹ì§•ì„ ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ê·¸ëŒ€ë¡œ ë¬¼ë ¤ë°›ëŠ” ê²ƒ
    - ì´ë¯¸ ì‘ì„±ëœ í´ë˜ìŠ¤ë¥¼ ë°›ì•„ì„œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒ
    - ê¸°ì¡´ ì½”ë“œë¥¼ ì¬í™œìš©í•´ì„œ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ê°ì²´ì§€í–¥ ë°©ë²•ì˜ ì¤‘ìš”í•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì— ì†í•œë‹¤.
4. ë‹¤í˜•ì„±
    - ì•½ê°„ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë™ì¼í•œ ì´ë¦„ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒ
    - ë™ì¼í•œ ëª…ë ¹ì˜ í•´ì„ì„ ì—°ê²°ëœ ê°ì²´ì— ì˜ì¡´í•˜ëŠ” ê²ƒ
    - ì˜¤ë²„ë¼ì´ë”©, ì˜¤ë²„ë¡œë”©
        - ì˜¤ë²„ë¼ì´ë”© - ë¶€ëª¨í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œì™€ ê°™ì€ ì´ë¦„ì„ ì‚¬ìš©í•˜ë©° ë§¤ê°œë³€ìˆ˜ë„ ê°™ì§€ë§Œ ë‚´ë¶€ ì†ŒìŠ¤ë¥¼ ì¬ì •ì˜í•˜ëŠ” ê²ƒ
        - ì˜¤ë²„ë¡œë”© - ê°™ì€ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì—¬ëŸ¬ ê°œ ì •ì˜í•œ í›„ ë§¤ê°œë³€ìˆ˜ë¥¼ ë‹¤ë¥´ê²Œ í•˜ì—¬ ê°™ì€ ì´ë¦„ì„ ê²½ìš°ì— ë”°ë¼ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒ
5. ë™ì  ë°”ì¸ë”©
    - ê°€ìƒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œë¥¼ ì»´íŒŒì¼í•  ë•Œ, ë°”ì¸ë”©ì„ ì‹¤í–‰ì‹œê°„ì— ê²°ì •í•˜ëŠ” ê²ƒ
    - íŒŒìƒ í´ë˜ìŠ¤ì˜ ê°ì²´ì— ëŒ€í•´, ê¸°ë³¸ í´ë˜ìŠ¤ì˜ í¬ì¸í„°ë¡œ ê°€ìƒ í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œ ì¼ì–´ë‚œë‹¤.
    - í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë™ì  ë°”ì¸ë”©ì„ í†µí•´ íŒŒìƒ í´ë˜ìŠ¤ì— ì˜¤ë²„ë¼ì´ë”© ëœ í•¨ìˆ˜ê°€ ì‹¤í–‰
    - í”„ë¡œê·¸ë˜ë°ì˜ ìœ ì—°ì„±ì„ ë†’ì—¬ì£¼ë©° íŒŒìƒ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜í•œ í•¨ìˆ˜ì˜ í˜¸ì¶œì„ ë³´ì¥

### ìš°ë¦¬ê°€ ì´ë²ˆ ì±•í„°ì—ì„œ ì„¤ê³„í•œ ì›¹ì„œë²„ëŠ” ì–´ë–¤ íŠ¹ì§•ì„ ì˜ ë³´ì´ê³  ì–´ë–¤ íŠ¹ì§•ì€ ì˜ ë“œëŸ¬ë‚˜ì§€ ì•Šì„ê¹Œ?

# ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ 5ëŒ€ ì„¤ê³„ ì›ì¹™ SOLID
[ì¶œì²˜ : í‹°ìŠ¤í† ë¦¬ 'ë§ë‚˜ë‹ˆê°œë°œì'](https://mangkyu.tistory.com/194)
## SOLIDë€?
SOLIDë€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ì„œ ì§€ì¼œì•¼í•˜ëŠ” 5ëŒ€ ì›ì¹™ìœ¼ë¡œ ê°ê° SRP, OCP, LSP,
DIP, ISPì˜ ì•ê¸€ìë¥¼ ë”°ì„œ ë§Œë“¤ì–´ì¡Œë‹¤. SOLID ì›ì¹™ì„ ì² ì €íˆ ì§€í‚¤ë©´ ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€ê²½ì´
ìš©ì´í•˜ê³ , ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì´ ì‰¬ìš´ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ê°œë°œí•˜ëŠ”ë° ë„ì›€ì´ ë˜ëŠ”ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ìˆë‹¤.
### 1. ë‹¨ì¼ ì±…ì„ì˜ ì›ì¹™(SRP, Single Responseibility Principle)
ëª¨ë“ˆì´ ë³€ê²½ë˜ëŠ” ì´ìœ ê°€ í•œê°€ì§€ì—¬ì•¼ í•¨ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì•¼ í•œë‹¤. ì—¬ê¸°ì„œ ë³€ê²½ì˜ ì´ìœ ê°€ í•œê°€ì§€ë¼ëŠ”
ê²ƒì€ í•´ë‹¹ ëª¨ë“ˆì´ ì—¬ëŸ¬ ëŒ€ìƒ ë˜ëŠ” ì•¡í„°ë“¤ì— ëŒ€í•´ ì±…ì„ì„ ê°€ì ¸ì„œëŠ” ì•ˆë˜ê³ , ì˜¤ì§ í•˜ë‚˜ì˜
ì•¡í„°ì— ëŒ€í•´ì„œë§Œ ì±…ì„ì„ ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
### 2. ê°œë°© íì‡„ ì›ì¹™(OCP, Open-Closed Principle)
ê°œë°© íì‡„ ì›ì¹™ì€ í™•ì¥ì— ëŒ€í•´ ì—´ë ¤ìˆê³  ìˆ˜ì •ì— ëŒ€í•´ì„œëŠ” ë‹«í˜€ìˆì–´ì•¼ í•œë‹¤ëŠ” ì›ì¹™ìœ¼ë¡œ,
ê°ê°ì´ ê°–ëŠ” ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
- í™•ì¥ì— ëŒ€í•´ ì—´ë ¤ìˆë‹¤: ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ë  ë•Œ ìƒˆë¡œìš´ ë™ì‘ì„ ì¶”ê°€í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
- ìˆ˜ì •ì— ëŒ€í•´ ë‹«í˜€ìˆë‹¤: ê¸°ì¡´ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
OCPê°€ ë³¸ì§ˆì ìœ¼ë¡œ ì–˜ê¸°í•˜ëŠ” ê²ƒì€ ì¶”ìƒí™”ì´ë‹¤.
### 3. ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™(LSP, Liskov Substitution Principle)
í•˜ìœ„ íƒ€ì…ì€ ìƒìœ„ íƒ€ì…ì„ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ëŠ”
ìƒìœ„ íƒ€ì…ì´ í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ë³€ê²½ë˜ì–´ë„, ì°¨ì´ì ì„ ì¸ì‹í•˜ì§€ ëª»í•œ ì±„ ìƒìœ„ íƒ€ì…ì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´
ì„œë¸Œ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
### 4. ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™(ISP, Interface Segregation Principle)
ê°ì²´ê°€ ì¶©ë¶„íˆ ë†’ì€ ì‘ì§‘ë„ì˜ ì‘ì€ ë‹¨ìœ„ë¡œ ì„¤ê³„ëë”ë¼ë„, ëª©ì ê³¼ ê´€ì‹¬ì´ ê°ê¸° ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê°€
ìˆë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì ì ˆí•˜ê²Œ ë¶„ë¦¬í•´ì¤„ í•„ìš”ê°€ ìˆëŠ”ë°, ì´ë¥¼ ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì´ë¼ê³ 
ë¶€ë¥¸ë‹¤. ì¦‰, ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì´ë€ í´ë¼ì´ì–¸íŠ¸ì˜ ëª©ì ê³¼ ìš©ë„ì— ì í•©í•œ ì¸í„°í˜ì´ìŠ¤ë§Œì„
ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤. ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì„ ì¤€ìˆ˜í•¨ìœ¼ë¡œì¨ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ ìì‹ ì˜ ê´€ì‹¬ì—
ë§ëŠ” í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤(ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë©”ì‹œì§€)ë§Œì„ ì ‘ê·¼í•´ ë¶ˆí•„ìš”í•œ ê°„ì„­ì„ ìµœì†Œí™”í• 
ìˆ˜ ìˆìœ¼ë©°, ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šì€ ì±„ë¡œ ìœ ì—°í•˜ê²Œ ê°ì²´ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
### 5. ì˜ì¡´ ì—­ì „ ì›ì¹™(DIP, Dependency Inversion Principle)
ê³ ìˆ˜ì¤€ ë¬˜ë‘˜ì€ ì €ìˆ˜ì¤€ ë¬˜ë‘˜ì˜ êµ¬í˜„ì— ì˜ì¡´í•´ì„œëŠ” ì•ˆ ë˜ë©°, ì €ìˆ˜ì¤€ ëª¨ë“ˆì´ ê³ ìˆ˜ì¤€ ëª¨ë“ˆì— ì˜ì¡´í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ê°ì²´ë“¤ ì‚¬ì´ì— ë©”ì‹œì§€ë¥¼ ì£¼ê³  ë°›ê¸° ìœ„í•´ ì˜ì¡´ì„ì´ ìƒê¸°ëŠ”ë°,
ì˜ì¡´ì„± ì—­ì „ì˜ ì›ì¹™ì€ ì˜¬ë°”ë¥¸ ì˜ì¡´ ê´€ê³„ë¥¼ ìœ„í•œ ì›ì¹™ì— í•´ë‹¹ëœë‹¤. ì—¬ê¸°ì„œ ê°ê° ê³ ìˆ˜ì¤€ ëª¨ë“ˆê³¼
ì €ìˆ˜ì¤€ ëª¨ë“ˆì´ë€ ë‹¤ìŒì„ ì˜ë¯¸í•œë‹¤.
- ê³ ìˆ˜ì¤€ ëª¨ë“ˆ: ì…ë ¥ê³¼ ì¶œë ¥ìœ¼ë¡œë¶€í„° ë¨¼(ë¹„ì§€ë‹ˆìŠ¤ì™€ ê´€ë ¨ëœ) ì¶”ìƒí™”ëœ ëª¨ë“ˆ
- ì €ìˆ˜ì¤€ ëª¨ë“ˆ: ì…ë ¥ê³¼ ì¶œë ¥ìœ¼ë¡œë¶€í„° ê°€ê¹Œìš´(HTTP, ë°ì´í„°ë² ì´ìŠ¤, ìºì‹œ ë“±ê³¼ ê´€ë ¨ëœ) êµ¬í˜„ ëª¨ë“ˆ

ì˜ì¡´ ì—­ì „ ì›ì¹™ì´ë€ ê²°êµ­ ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ê´€ë ¨ëœ ë¶€ë¶„ì´ ì„¸ë¶€ ì‚¬í•­ì—ëŠ” ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ì„¤ê³„ ì›ì¹™ì„ ì˜ë¯¸í•œë‹¤.

> SOLIDì˜ í•µì‹¬ì€ ê²°êµ­ ì¶”ìƒí™”ì™€ ë‹¤í˜•ì„±ì´ë‹¤. êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì¶”ìƒ í´ë˜ìŠ¤ì—
> ì˜ì¡´í•¨ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ìœ ì—°í•˜ê³  í™•ì¥ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
